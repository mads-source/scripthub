local Settings = {
	FOV = 120,
	TransparencyModifier = 0.5,
}
local CameraObjects = {}
local Workspace = game:GetService("Workspace")
local Camera = Workspace.CurrentCamera
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local BindName = HttpService:GenerateGUID(false):gsub("-", "")
local UserInputConnection
local CameraDescendantAdded
local CameraDescendantRemoving
local LastFOV = Camera.FieldOfView
local Enabled = false
local function RefreshCameraObjects()
	table.clear(CameraObjects)
	for _, Object in ipairs(Camera:GetDescendants()) do
		CameraObjects[#CameraObjects + 1] = Object
	end
end
CameraDescendantAdded = Camera.DescendantAdded:Connect(RefreshCameraObjects)
CameraDescendantRemoving = Camera.DescendantRemoving:Connect(RefreshCameraObjects)
local function BindFunction()
	if Camera.FieldOfView ~= Settings.FOV then
		Camera.FieldOfView = Settings.FOV
	end
	for _, Object in ipairs(CameraObjects) do
		if Object:IsA("BasePart") then
			if Object.LocalTransparencyModifier ~= Settings.TransparencyModifier then
				Object.LocalTransparencyModifier = Settings.TransparencyModifier
			end
		elseif Object:IsA("ParticleEmitter") then
			Object:Clear()
		elseif Object:IsA("Decal") then
			if Object.Transparency ~= Settings.TransparencyModifier then
				Object.Transparency = Settings.TransparencyModifier
			end
 		end
	end
end
local function Enable()
	if Enabled then
		return
	end
	Enabled = true
	LastFOV = Camera.FieldOfView
	RunService:BindToRenderStep(BindName, 9999, BindFunction)
	RefreshCameraObjects()
end
local function Disable()
	if not Enabled then
		return
	end
	Enabled = false
	Camera.FieldOfView = LastFOV
	RunService:UnbindFromRenderStep(BindName)
	for _, Object in ipairs(CameraObjects) do
		if Object:IsA("BasePart") then
			Object.LocalTransparencyModifier = 0
		elseif Object:IsA("Decal") then
			Object.Transparency = 0
		end
	end
end
UserInputConnection = UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then
		return
	end
	if input.KeyCode == Enum.KeyCode.Delete then
		if Enabled then
			Disable()
		else
			Enable()
		end
	end
end)
Players.PlayerRemoving:Connect(function(player)
	if player == Players.LocalPlayer then
		Disable()
		if UserInputConnection then
			UserInputConnection:Disconnect()
		end
		if CameraDescendantAdded then
			CameraDescendantAdded:Disconnect()
		end
		if CameraDescendantRemoving then
			CameraDescendantRemoving:Disconnect()
		end
	end
end)
local CameraGuiName = HttpService:GenerateGUID(false):gsub("-", "")
local ParentGui = Players.LocalPlayer.PlayerGui:FindFirstChild(CameraGuiName)
if not ParentGui then
	ParentGui = Instance.new("ScreenGui")
	ParentGui.Name = CameraGuiName
	ParentGui.ResetOnSpawn = false
	ParentGui.Parent = Players.LocalPlayer.PlayerGui
end
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 220, 0, 130)
Frame.Position = UDim2.new(0, 20, 0, 200)
Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Frame.Parent = ParentGui

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 25)
Title.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Title.Text = "Camera Settings"
Title.TextColor3 = Color3.new(1,1,1)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18
Title.Parent = Frame
local DraggingUI = false
local DragStart, StartPos
Title.InputBegan:Connect(function(Input)
	if Input.UserInputType == Enum.UserInputType.MouseButton1 then
		DraggingUI = true
		DragStart = Input.Position
		StartPos = Frame.Position
	end
end)
UserInputService.InputEnded:Connect(function(Input)
	if Input.UserInputType == Enum.UserInputType.MouseButton1 then
		DraggingUI = false
	end
end)
UserInputService.InputChanged:Connect(function(Input)
	if DraggingUI and Input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = Input.Position - DragStart
		Frame.Position = UDim2.new(
			StartPos.X.Scale,
			StartPos.X.Offset + delta.X,
			StartPos.Y.Scale,
			StartPos.Y.Offset + delta.Y
		)
	end
end)
local function CreateSlider(name, min, max, default, yPos, decimals)
	local Label = Instance.new("TextLabel")
	Label.Size = UDim2.new(1, -10, 0, 20)
	Label.Position = UDim2.new(0, 5, 0, yPos)
	Label.BackgroundTransparency = 1
	Label.TextColor3 = Color3.new(1,1,1)
	Label.Font = Enum.Font.SourceSans
	Label.TextSize = 16
	Label.Text = name .. ": " .. default
	Label.Parent = Frame
	local Bar = Instance.new("Frame")
	Bar.Size = UDim2.new(1, -10, 0, 6)
	Bar.Position = UDim2.new(0, 5, 0, yPos + 20)
	Bar.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
	Bar.Parent = Frame
	local Knob = Instance.new("Frame")
	Knob.Size = UDim2.new(0, 10, 0, 14)
	Knob.Position = UDim2.new((default - min) / (max - min), -5, 0.5, -7)
	Knob.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
	Knob.Parent = Bar
	local Dragging = false
	local function FormatValue(v)
		return string.format("%."..decimals.."f", v)
	end
	Knob.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then Dragging = true end
	end)
	UserInputService.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then Dragging = false end
	end)
	RunService.RenderStepped:Connect(function()
		if Dragging then
			local Rel = math.clamp((game:GetService("UserInputService"):GetMouseLocation().X - Bar.AbsolutePosition.X) / Bar.AbsoluteSize.X, 0, 1)
			Knob.Position = UDim2.new(Rel, -5, 0.5, -7)
			local Value = min + (max - min) * Rel
			Value = tonumber(FormatValue(Value))
			Label.Text = name .. ": " .. Value
			if name == "FOV" then
				Settings.FOV = Value
			elseif name == "Transparency" then
				Settings.TransparencyModifier = Value
			end
		end
	end)
end
CreateSlider("FOV", 30, 120, Settings.FOV, 30, 0)
CreateSlider("Transparency", 0, 1, Settings.TransparencyModifier, 70, 2)
local Toggle = Instance.new("TextButton")
Toggle.Size = UDim2.new(1, -10, 0, 25)
Toggle.Position = UDim2.new(0, 5, 0, 105)
Toggle.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
Toggle.TextColor3 = Color3.new(1,1,1)
Toggle.Text = "Toggle Camera"
Toggle.Font = Enum.Font.SourceSansBold
Toggle.TextSize = 16
Toggle.Parent = Frame
Toggle.MouseButton1Click:Connect(function()
	if Enabled then
		Disable() 
	else
		Enable()
	end
end)
